import{S as Q,_ as Z,u as ee,V as te}from"./typography-nRPUQl0B.js";import{r as E}from"./iframe-DjME0V7K.js";function O(){return O=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)({}).hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},O.apply(null,arguments)}var V="DELAY",_="ERROR",Y="LONG_PRESS_DETECTED",u="NOT_RESPONDER",P="RESPONDER_ACTIVE_LONG_PRESS_START",D="RESPONDER_ACTIVE_PRESS_START",y="RESPONDER_INACTIVE_PRESS_START",se="RESPONDER_GRANT",d="RESPONDER_RELEASE",X="RESPONDER_TERMINATED",k=Object.freeze({NOT_RESPONDER:{DELAY:_,RESPONDER_GRANT:y,RESPONDER_RELEASE:_,RESPONDER_TERMINATED:_,LONG_PRESS_DETECTED:_},RESPONDER_INACTIVE_PRESS_START:{DELAY:D,RESPONDER_GRANT:_,RESPONDER_RELEASE:u,RESPONDER_TERMINATED:u,LONG_PRESS_DETECTED:_},RESPONDER_ACTIVE_PRESS_START:{DELAY:_,RESPONDER_GRANT:_,RESPONDER_RELEASE:u,RESPONDER_TERMINATED:u,LONG_PRESS_DETECTED:P},RESPONDER_ACTIVE_LONG_PRESS_START:{DELAY:_,RESPONDER_GRANT:_,RESPONDER_RELEASE:u,RESPONDER_TERMINATED:u,LONG_PRESS_DETECTED:P},ERROR:{DELAY:u,RESPONDER_GRANT:y,RESPONDER_RELEASE:u,RESPONDER_TERMINATED:u,LONG_PRESS_DETECTED:u}}),F=s=>s.getAttribute("role"),p=s=>s.tagName.toLowerCase(),x=s=>s===D||s===P,v=s=>F(s)==="button",H=s=>s===y||s===D||s===P,ie=s=>s===X||s===d,j=s=>{var t=s.key,r=s.target,i=t===" "||t==="Spacebar",e=p(r)==="button"||v(r);return t==="Enter"||i&&e},re=450,ae=50;class ne{constructor(t){this._eventHandlers=null,this._isPointerTouch=!1,this._longPressDelayTimeout=null,this._longPressDispatched=!1,this._pressDelayTimeout=null,this._pressOutDelayTimeout=null,this._touchState=u,this._responderElement=null,this.configure(t)}configure(t){this._config=t}reset(){this._cancelLongPressDelayTimeout(),this._cancelPressDelayTimeout(),this._cancelPressOutDelayTimeout()}getEventHandlers(){return this._eventHandlers==null&&(this._eventHandlers=this._createEventHandlers()),this._eventHandlers}_createEventHandlers(){var t=(e,a)=>{e.persist(),this._cancelPressOutDelayTimeout(),this._longPressDispatched=!1,this._selectionTerminated=!1,this._touchState=u,this._isPointerTouch=e.nativeEvent.type==="touchstart",this._receiveSignal(se,e);var n=g(this._config.delayPressStart,0,ae);a!==!1&&n>0?this._pressDelayTimeout=setTimeout(()=>{this._receiveSignal(V,e)},n):this._receiveSignal(V,e);var o=g(this._config.delayLongPress,10,re);this._longPressDelayTimeout=setTimeout(()=>{this._handleLongPress(e)},o+n)},r=e=>{this._receiveSignal(d,e)},i=e=>{var a=this._config.onPress,n=e.target;if(this._touchState!==u&&j(e)){r(e),document.removeEventListener("keyup",i);var o=n.getAttribute("role"),l=p(n),h=o==="link"||l==="a"||l==="button"||l==="input"||l==="select"||l==="textarea",R=this._responderElement===n;a!=null&&!h&&R&&a(e),this._responderElement=null}};return{onStartShouldSetResponder:e=>{var a=this._config.disabled;return a&&v(e.currentTarget)&&e.stopPropagation(),a==null?!0:!a},onKeyDown:e=>{var a=this._config.disabled,n=e.key,o=e.target;if(!a&&j(e)){this._touchState===u&&(t(e,!1),this._responderElement=o,document.addEventListener("keyup",i));var l=n===" "||n==="Spacebar",h=F(o),R=h==="button"||h==="menuitem";l&&R&&p(o)!=="button"&&e.preventDefault(),e.stopPropagation()}},onResponderGrant:e=>t(e),onResponderMove:e=>{this._config.onPressMove!=null&&this._config.onPressMove(e);var a=w(e);if(this._touchActivatePosition!=null){var n=this._touchActivatePosition.pageX-a.pageX,o=this._touchActivatePosition.pageY-a.pageY;Math.hypot(n,o)>10&&this._cancelLongPressDelayTimeout()}},onResponderRelease:e=>r(e),onResponderTerminate:e=>{e.nativeEvent.type==="selectionchange"&&(this._selectionTerminated=!0),this._receiveSignal(X,e)},onResponderTerminationRequest:e=>{var a=this._config,n=a.cancelable,o=a.disabled,l=a.onLongPress;return!o&&l!=null&&this._isPointerTouch&&e.nativeEvent.type==="contextmenu"?!1:n??!0},onClick:e=>{var a=this._config,n=a.disabled,o=a.onPress;n?v(e.currentTarget)&&e.stopPropagation():(e.stopPropagation(),this._longPressDispatched||this._selectionTerminated?e.preventDefault():o!=null&&e.altKey===!1&&o(e))},onContextMenu:e=>{var a=this._config,n=a.disabled,o=a.onLongPress;n?v(e.currentTarget)&&e.stopPropagation():o!=null&&this._isPointerTouch&&!e.defaultPrevented&&(e.preventDefault(),e.stopPropagation())}}}_receiveSignal(t,r){var i=this._touchState,e=null;k[i]!=null&&(e=k[i][t]),!(this._touchState===u&&t===d)&&(e==null||e===_?console.error("PressResponder: Invalid signal "+t+" for state "+i+" on responder"):i!==e&&(this._performTransitionSideEffects(i,e,t,r),this._touchState=e))}_performTransitionSideEffects(t,r,i,e){if(ie(i)&&(setTimeout(()=>{this._isPointerTouch=!1},0),this._touchActivatePosition=null,this._cancelLongPressDelayTimeout()),H(t)&&i===Y){var a=this._config.onLongPress;a!=null&&e.nativeEvent.key==null&&(a(e),this._longPressDispatched=!0)}var n=x(t),o=x(r);if(!n&&o?this._activate(e):n&&!o&&this._deactivate(e),H(t)&&i===d){var l=this._config,h=l.onLongPress,R=l.onPress;if(R!=null){var S=h!=null&&t===P;S||!o&&!n&&(this._activate(e),this._deactivate(e))}}this._cancelPressDelayTimeout()}_activate(t){var r=this._config,i=r.onPressChange,e=r.onPressStart,a=w(t);this._touchActivatePosition={pageX:a.pageX,pageY:a.pageY},e?.(t),i?.(!0)}_deactivate(t){var r=this._config,i=r.onPressChange,e=r.onPressEnd;function a(){e?.(t),i?.(!1)}var n=g(this._config.delayPressEnd);n>0?this._pressOutDelayTimeout=setTimeout(()=>{a()},n):a()}_handleLongPress(t){(this._touchState===D||this._touchState===P)&&this._receiveSignal(Y,t)}_cancelLongPressDelayTimeout(){this._longPressDelayTimeout!=null&&(clearTimeout(this._longPressDelayTimeout),this._longPressDelayTimeout=null)}_cancelPressDelayTimeout(){this._pressDelayTimeout!=null&&(clearTimeout(this._pressDelayTimeout),this._pressDelayTimeout=null)}_cancelPressOutDelayTimeout(){this._pressOutDelayTimeout!=null&&(clearTimeout(this._pressOutDelayTimeout),this._pressOutDelayTimeout=null)}}function g(s,t,r){return t===void 0&&(t=0),r===void 0&&(r=0),Math.max(t,s??r)}function w(s){var t=s.nativeEvent,r=t.changedTouches,i=t.touches;return i!=null&&i.length>0?i[0]:r!=null&&r.length>0?r[0]:s.nativeEvent}function oe(s,t){var r=E.useRef(null);r.current==null&&(r.current=new ne(t));var i=r.current;return E.useEffect(()=>{i.configure(t)},[t,i]),E.useEffect(()=>()=>{i.reset()},[i]),E.useDebugValue(t),i.getEventHandlers()}var le=["activeOpacity","delayPressIn","delayPressOut","delayLongPress","disabled","focusable","onLongPress","onPress","onPressIn","onPressOut","rejectResponderTermination","style"];function ue(s,t){var r=s.activeOpacity,i=s.delayPressIn,e=s.delayPressOut,a=s.delayLongPress,n=s.disabled,o=s.focusable,l=s.onLongPress,h=s.onPress,R=s.onPressIn,S=s.onPressOut,m=s.rejectResponderTermination,z=s.style,B=Z(s,le),N=E.useRef(null),U=ee(t,N),A=E.useState("0s"),q=A[0],L=A[1],b=E.useState(null),C=b[0],I=b[1],T=E.useCallback((c,f)=>{I(c),L(f?f/1e3+"s":"0s")},[I,L]),G=E.useCallback(c=>{T(r??.2,c)},[r,T]),M=E.useCallback(c=>{T(null,c)},[T]),W=E.useMemo(()=>({cancelable:!m,disabled:n,delayLongPress:a,delayPressStart:i,delayPressEnd:e,onLongPress:l,onPress:h,onPressStart(c){var f=c.dispatchConfig!=null?c.dispatchConfig.registrationName==="onResponderGrant":c.type==="keydown";G(f?0:150),R?.(c)},onPressEnd(c){M(250),S?.(c)}}),[a,i,e,n,l,h,R,S,m,G,M]),J=oe(N,W);return E.createElement(te,O({},B,J,{accessibilityDisabled:n,focusable:!n&&o!==!1,pointerEvents:n?"box-none":void 0,ref:U,style:[$.root,!n&&$.actionable,z,C!=null&&{opacity:C},{transitionDuration:q}]}))}var $=Q.create({root:{transitionProperty:"opacity",transitionDuration:"0.15s",userSelect:"none"},actionable:{cursor:"pointer",touchAction:"manipulation"}}),K=E.memo(E.forwardRef(ue));K.displayName="TouchableOpacity";const _e=K;export{_e as T};
